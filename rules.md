[上一页：环境配置](install.md)

***

## 3.1 评分机制

比赛的评分机制的主要概念说明如下：

- 一个场景也称为一个赛题。每个场景会有`场景得分`，比赛的`最终得分`是所有`场景得分`的**平均分**。

- 每个场景的得分由若干项具体[**评价指标**](rules.md#311-%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87)的得分**加权平均**得出。

- 各个场景的评价指标的具体参数可能会不同。

- 所有评分都是百分制。最低分为0分，最高分为100分。得分越高，则表示表现越好。

### 3.1.1 评价指标

自动驾驶车辆的驾驶能力可以由多个指标体现。在这次的比赛中，我们设计并实现了一套多角度、多层次的评分机制，使得我们对于选手的自驾算法有全方位且公平的评价。具体的**评价指标**及其对应**权重**（括号中的数字）如下，权重越高则代表指标在总分计算中越重要:

- `场景用时`（0.6）： 每个场景有最大运行时间限制，具体的用时上限会根据场景情况进行调整。如果超时，**则本场景总分为0分**。如果到达终点用时小于时间限制，则在一定的范围内，耗时越短则分数越高。

- `到达终点`（1）：主车是否抵达了场景预设的终点。如果场景执行结束，而主车没有到达终点，**则本场景总分为0分**。如果成功到达，则为100分。

- `闯红灯`（1）： 如果主车在路口前进方向的交通灯为红灯时驶出停止线，则本项为0分。如果没有违规，则为100分。

- `驶出行车道`（1）： 如果主车错误地行驶到了停车道、人行道等，则本项为0分。如果没有违规，则为100分。

- `压实线`（1）： 如果主车在行驶过程中压实线，则本项为0分。如果没有违规，则为100分。

- `碰撞`（1）： 如果主车与车辆、行人或障碍物发生碰撞，**则本场景总分为0分**。如果没有发生碰撞，则为100分。

- `限速`（0.8）： 规定了车辆的最高限速。如果主车最高速度超出最高限速，则相应的指标为0分。如果没有出现违反限速的情况，则在一定范围内，速度越低则分数越高。

- `加速度`（0.5）： 是速度对于时间的导数，包括纵向加速度和横向加速度两个指标，反映行驶过程的舒适度。

- `加速度变化率`（0.3）： 是加速度对于时间的导数，包括纵向加速度变化率和横向加速度变化率两个指标，反映行驶过程的舒适度。

### 3.1.2 评分计算细则

在这里对几处评分计算作详细的解释。需要注意的是，无论是指标评分还是总分，其得分均为百分制，最低为0分，最高为100分。如果评分计算公式给出的分数超出了这个范围，则该分数会被截取至0或100分。

记指标中的期望值为*T*，测得的指标真实值为*x*。

对于`场景用时`、`限速`指标，如果指标的真实值大于期望值，则为0分。反之，则该指标分数为：

$score = 60+40*\frac{|T-x|}{0.4*T}$

对于`加速度`、`加速度变化率`，计算方式略有不同。若真实值大于期望值，则该指标分数为：

$score = 60+40*\frac{|T-x|}{0.4*T}$

若真实值小于期望值，则指标分数计算与场景用时指标相同。

## 3.2 比赛场景

仿真测试是自动驾驶研发的基础关键技术。相比成本高、限制多、效率低的真实路测，[**Oasis自动驾驶仿真平台**](https://guardstrike.com/tech.html) 可以提供更加丰富多样的静态环境和连续动态的设计/智能交通流，可以在有限的仿真测试里程内显著增加高价值场景出现的密度，提高自动驾驶仿真测试的效率和有效性。

本次比赛主要测试自动驾驶算法在城市区域内各种复杂交通环境下的感知、规划和决策能力。比赛使用的所有场景所属的ODD（运行设计域）为各种天气、光照环境下的城市区域内多种交通参与者交互的低速工况。

本次比赛将在Oasis自动驾驶仿真平台内为参赛队伍提供多个训练场景，用于参赛队伍进行自动驾驶算法的开发和调试；比赛所使用的测试场景用于评测参赛者提交的自动驾驶算法，并根据评分机制进行排名。训练场景和测试场景使用相同的地图集合。

### 3.2.1 地图

根据场景所属ODD，本次比赛使用的地图中包含各类城市道路类型，如双向二车道、双向四车道，非路口直道、弯道，带有交通信号灯的十字路口、T型路口，环岛，匝道连接的立交桥等。每个地图的具体信息可在场景编辑器中查看。

### 3.2.1 训练场景

训练场景包含26个原子场景，用于提供给参赛选手进行自动驾驶算法的开发和调试。所有训练场景都可以被查看和编辑，也可根据训练场景衍生出更多的场景来满足自动驾驶算法开发所需的数据采集需求和场景多样性需求。

在 [**场景页面 - 训练场景**](scenarios.md#61-训练场景) 中，对每个训练场景进行详细介绍。

### 3.2.2 测试场景

测试场景包含10个由2-4个原子场景组合而成的复杂场景，用于评测参赛选手提交的自动驾驶算法。所有测试场景均部署于云端，不可查看。参赛选手提交自动驾驶算法后，按次序使用测试场景进行跑分并将结果显示在页面上。

在 [**场景页面 - 测试场景**](scenarios.md#62-测试场景) 中，对每个测试场景进行详细介绍。

### 3.2.3 场景规则

1. 为了避免主车带有初速度接入待测自动驾驶系统造成的车辆失控，所有训练和测试场景中的主车都在场景开始运行第0.1秒时，以初速度为零接入待测自动驾驶算法；

2. 所有场景根据主车起点和终点，使用Hybrid A*算法规划最短路径，基于最短路径和场景对应的最低平均速度计算场景运行最大限时，预期里程和预期用时可在[**场景页面**](scenarios.md)中查看。主车在最大限时内未到达终点则判定为超时。

3. 场景编辑器向所有参赛选手开放，参赛选手可以自行按需编辑任意数量的场景，以满足场景多样性和数据采集的需求。




## 3.3 重要提示

!> 严禁恶意使用或攻击Openatom Carsmos全球开源自动驾驶算法大赛的基础设施，包括用于运行该服务的所有软件和硬件。这些行为可能导致团队被禁止参赛。

?> 为了平衡算力，每个传感器单元可访问的数量都是有限的。比赛每个提交的文件都将在AWS中使用 [g4dn.4xlarge](https://aws.amazon.com/cn/ec2/instance-types/g4/?nc1=h_ls) 实例进行评估。

参赛队伍在一个月内或一天内的提交机会是有限的（一个月提交次数不超过 `30` 次，一天内不超过 `2` 次）。

***

[上一页：开发环境](install.md)

[下一页：提交说明](submit.md)